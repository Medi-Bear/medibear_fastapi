language: 'ko-KR'

tone_instructions: 'FastAPI(Python) 코드를 빠르고 명확하게 리뷰하고, 건설적인 개선 제안을 제공합니다.'

early_access: false
enable_free_tier: true

reviews:
  profile: 'chill'
  high_level_summary: true
  poem: false

  path_filters:
    - '!target/**'
    - '!build/**'
    - '!out/**'
    - '!node_modules/**'
    - '!__pycache__/**'
    - '!venv/**'

    # FastAPI / Python
    - path: '**/*.py'
      instructions: |
        FastAPI/Python 코드 리뷰 시 다음 항목을 중점적으로 확인하세요.

        1. 보안 및 인증
        - 환경 변수(.env)로 시크릿/DB 비밀번호를 관리하는지 확인
        - JWT, OAuth2 등 인증 로직이 안전하게 구현되어 있는지 검토
        - CORS, CSRF, XSS, SQL Injection에 대한 방어 로직 존재 여부 확인

        2. API 및 비즈니스 로직 구조
        - FastAPI Router, Service, Repository 계층 분리가 되어 있는지
        - 엔드포인트 응답 모델(Pydantic) 검증이 적절한지
        - 요청·응답 모델과 DB 모델이 명확히 분리되어 있는지 확인

        3. 비동기 처리 및 예외 관리
        - async/await 비동기 처리가 일관되게 사용되는지 확인
        - 예외 발생 시 HTTPException 등으로 일관된 응답 구조를 유지하는지
        - 로깅(logging) 및 에러 핸들링이 중앙화되어 있는지 (Middleware, Exception Handler)

        4. 데이터베이스 접근
        - SQLAlchemy 세션 관리가 올바른지 (세션 누수 방지)
        - 트랜잭션 커밋/롤백 처리가 안전하게 수행되는지
        - ORM 쿼리 최적화 및 N+1 문제 확인

        5. 퍼포먼스 및 확장성
        - 반복 I/O나 Blocking 코드가 event loop를 막지 않는지
        - 캐싱(Redis 등)을 활용해 반복 요청을 최적화하는지
        - 환경별 설정(dev/prod/test)이 명확히 분리되어 있는지

        6. 테스트 및 문서화
        - pytest 단위/통합 테스트 존재 여부
        - FastAPI 내장 문서(Swagger, ReDoc)가 자동으로 반영되는지
        - 코드 주석과 README가 최신 상태인지 확인

  ignore:
    - '**/test/**'
    - '**/target/**'
    - '**/build/**'
    - '**/__pycache__/**'
    - '**/*.spec.java'
    - '**/*.generated.java'

  auto_review:
    enabled: true
    ignore_title_keywords:
      - 'WIP'
      - 'Draft'
      - 'DO NOT MERGE'

code_generation:
  docstrings:
    language: 'ko-KR'
